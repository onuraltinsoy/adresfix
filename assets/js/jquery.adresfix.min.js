!function(e){e.fn.adresfix=function(s){var t={searchForm:e("#adresfix-search"),responseForm:e("#adresfix-response"),responseInputBlock:e(".block"),responseInputStreet:e(".street"),responseInputDistrict:e(".district"),responseInputCounty:e(".county"),responseInputCity:e(".city"),responseInputCountry:e(".country"),responseInputZip:e(".zip"),responseTextFullAddress:e(".full-address"),map:e(".map")},s=e.extend(t,s),n=[];e(document).on("submit",s.searchForm,function(t){t.preventDefault();var r=s.searchForm.find('input[name="address"]').val();e.ajax({type:"post",url:"https://maps.googleapis.com/maps/api/geocode/json?address="+r+"&key="+s.mapsKey,success:function(s,t,r){for(var o="",a=0;a<s.results.length;a++)o+="<li>"+s.results[a].formatted_address+"</li>";e(".adresfix-form-group").append('<div class="adresfix-suggest"><span><i class="fa fa-close"></i></span>'+o+"</div>"),n=s,console.log(s)}})}),e(document).on("click",".adresfix-suggest span",function(){e(this).parent().remove()}),e(document).on("focus",".adresfix-form-group input[name=address]",function(){e(".adresfix-suggest").remove()}),e(document).on("click",".adresfix-suggest li",function(t){var r=e(".adresfix-suggest li").index(this),o=n.results[r].address_components;n.results[r].geometry.location;s.map.html('<iframe src="https://www.google.com/maps/embed/v1/place?key='+s.mapsKey+"&q="+e(this).text()+'"></iframe>'),s.responseForm.find("input").val(""),s.responseForm.find("textarea").empty(),s.responseTextFullAddress.text(e(this).text());for(var a=0;a<o.length;a++)"administrative_area_level_3"==o[a].types[0]||"administrative_area_level_2"==o[a].types[0]?s.responseInputCounty.val(o[a].long_name):"administrative_area_level_1"==o[a].types[0]?s.responseInputCity.val(o[a].long_name):"administrative_area_level_4"==o[a].types[0]||"locality"==o[a].types[0]?s.responseInputDistrict.val(o[a].long_name):"country"==o[a].types[0]?s.responseInputCountry.val(o[a].long_name):"postal_code"==o[a].types[0]?s.responseInputZip.val(o[a].long_name):"street_number"==o[a].types[0]?s.responseInputBlock.val(o[a].long_name):"route"==o[a].types[0]&&s.responseInputStreet.val(o[a].long_name)})}}(jQuery);